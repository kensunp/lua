#######################################################################
#
# This is the main Nginx configuration file.  
#
# More information about the configuration options is available on 
#   * the English wiki - http://wiki.nginx.org/Main
#   * the Russian documentation - http://sysoev.ru/nginx/
#
#######################################################################

#----------------------------------------------------------------------
# Main Module - directives that cover basic functionality
#
#   http://wiki.nginx.org/NginxHttpMainModule
#
#----------------------------------------------------------------------

user              nobody;
worker_processes  16;
#worker_cpu_affinity 0001 0010 0100 1000;

#error_log  /var/log/nginx/error.log debug;
#error_log  /var/log/nginx/error.log  notice;
error_log  /var/log/nginx/error.log  info;

pid        /var/run/nginx.pid;

#----------------------------------------------------------------------
# Events Module 
#
#   http://wiki.nginx.org/NginxHttpEventsModule
#
#----------------------------------------------------------------------

events {
    use epoll;
    worker_connections  1024;
    multi_accept on;
}

#----------------------------------------------------------------------
# HTTP Core Module
#
#   http://wiki.nginx.org/NginxHttpCoreModule 
#
#----------------------------------------------------------------------

http {
    include       /usr/local/nginx/conf/mime.types;
    default_type  application/octet-stream;
    large_client_header_buffers 4 64K;
    connection_pool_size 64K;
#    autoindex on;
#    autoindex_exact_size off;
#    autoindex_localtime on;
#    charset gbk,utf-8;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$http_host" "$request" "$request_body"'
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for" "$upstream_addr" "$uid_got" "$uid_set" "sid:$cookie_lvsessionid" ' ;



	userid on;
	userid_name uid;
	userid_domain lvmama.com;
	userid_path /;
	userid_expires 365d;
	userid_p3p 'policyref="/w3c/p3p.xml", CP="CUR ADM OUR NOR STA NID"';	
    access_log  /var/log/nginx/access.log  main;
    proxy_temp_path /var/data/cache_tmp ;
    proxy_cache_path /var/data/cache levels=1:2 keys_zone=NAME:600m inactive=60m;
    proxy_connect_timeout 2s;


    sendfile        on;
    send_timeout 180;
    #tcp_nopush     on;
    server_tokens off;
    keepalive_timeout  180;
    client_max_body_size 20m;
    client_body_buffer_size 512k;

    proxy_buffer_size          16k;
    proxy_buffers              16 128k;
    proxy_busy_buffers_size    512k;
    proxy_temp_file_write_size 512k;
	fastcgi_connect_timeout 300;
	fastcgi_send_timeout 300;
	fastcgi_read_timeout 300;

    gzip  on;
    gzip_http_version 1.1;

    lua_package_path  '/usr/local/nginx/conf/lua_script/lvmama_ngx_lua/front-nginx/module/?.lua;';

    upstream php_servers {
       server 192.168.0.139:80 weight=5;
       # server 192.168.0.67:80 weight=5;
        #server 192.168.0.95:6060 weight=5;
    }
    upstream php1_servers {
        server 192.168.0.95:6060 weight=5;
    }
    upstream php139_servers {
        server 192.168.0.139:80 weight=5;
    }
    upstream pic_servers {
        server 192.168.0.121:80 weight=5;
    }
    upstream crm_server_servers {
      server 192.168.0.59:8092;
    }
    upstream user_credit_server_servers {
      server 10.200.2.67:8080;
    }
    
   # upstream  ebk_servers {
   #     server 10.200.1.203:6086;
   # }
    upstream other_servers {
        server 10.200.1.203:8016;
    }
    upstream ocs_servers {
	server 10.200.1.203:8035;
    }

    upstream pc_servers {
        server 10.200.1.203:8037;
    }

    upstream https_pc_servers {
        server 10.200.1.203:8449;
    }

    upstream front_servers {
        server 10.200.1.203:8036;
    }

    upstream https_front_servers {
        server 10.200.1.203:8444;
    }

    upstream 519_servers {
        server 10.200.1.203:8036;
    }
    upstream pet_finfront_servers {
        server 10.200.1.203:8028;
    }
    upstream https_pet_finfront_servers {
        server 10.200.1.203:8445;
    }

    upstream back_servers {
        server 10.200.1.203:8091;
    }
    upstream finance_back_servers {
        server 10.200.1.203:8079;
    }
    upstream super_service_servers {
        server 10.200.1.203:8092;
    }
    upstream pet_service_servers {
        server 10.200.1.203:8093;
    }
    upstream   seo_back_servers {
        server 10.200.1.203:8057;
    }
    upstream   seo_dist_servers {
        server 10.200.1.203:8058;
    }
    upstream sync_service_servers {
        server 10.200.4.110:8005;
   }

    upstream sync_web_servers {
        server 10.200.4.110:8005;
   }
    upstream   seo_api_servers {
         server 10.200.1.203:8058;
    }

    upstream payment_servers {
      ###8106端口为周四支付！！！
      server 10.200.1.201:8106;
      # server 10.200.1.201:8105;
    }
    upstream https_payment_servers {
      ###8106端口为周四支付！！！
      server 10.200.1.201:8445;
      # server 10.200.1.201:8105;
    }
    upstream report_servers {
        server 10.200.1.203:8033;
    }
    upstream hotel_servers {
       server 10.200.1.203:8019;
    }

    upstream vst_back_servers{
	server 10.200.4.102:8069;
    }
   upstream vst_search_servers_sol {
        server 10.200.2.62:8080;
    }

    upstream vst_order_servers{
        server 10.200.4.102:8083;
    }

    upstream task_back_servers{
        server 10.200.4.102:8097;
    }

    upstream vst_workflow_servers{
        server 10.200.4.102:8038;
    }


    upstream vst_ebk_servers{
        server 10.200.4.102:8068;
    }

    upstream vst_ebkService_servers{
        server 10.200.4.102:8070;
    }
	
    upstream tnt_platform_servers{
        server 10.200.1.203:8025;
    }
    upstream vst_pet_servers{
        server 10.200.4.102:8071;
    }

    upstream vst_front_servers{
	server 10.200.4.102:8067;
    }

    upstream vst_prom_servers{
        server 10.200.4.102:8031;
    }

    upstream vst_supp_servers{
        server 10.200.4.102:8066;
    }

    upstream vst_suppTicket_servers{
        server 10.200.4.102:8072;
    }

#    upstream vst_search_servers{
#	server 10.200.1.203:8087;
#    }
    upstream vst_search_servers{
	server 10.200.4.102:8087;
    }
    upstream vst_master_servers{
	server 10.200.4.102:8087;
    }


    upstream tnt_servers {
        server 10.200.1.203:8019;
    }

    upstream tnt_front_servers {
        server 10.200.1.203:8020;
    }


    upstream tnt_back_servers {
        server 10.200.1.203:8021;
     }

    upstream tnt_taobao_servers {
          server 10.200.1.203:8024;
    }

    upstream 3g_servers { 
	server 192.168.0.97:5091; 
    }

     upstream client_clutter {
	server 192.168.0.97:8035;
    }

    upstream vst_passport_servers {
        server 10.200.4.102:8085;
    }
    upstream vst_prodcal_servers {
        server 10.200.4.102:8086;
    }
   upstream interfacePlatform_servers{
        server 10.200.4.102:8032;
    }


    upstream pic_lib_servers {
      server 10.200.1.203:8056;
    }
   
     upstream https_pic_lib_servers {
        server 10.200.1.203:8443;
    }

    upstream tnt_order_servers {
          server 10.200.1.203:8023;
    }

    upstream front2_servers {
       server 10.200.1.203:8034;
    }
      upstream pet_service2_servers {
        server 10.200.1.203:8033;
    }

    upstream vst_allocation_servers {
      server 10.200.4.102:8024;
    }
    
     upstream rest_servers {
        server 10.200.4.102:8040;
    }
    upstream prodcal_cruise_servers{
	server 10.200.4.102:8041;
    }
    upstream prodcal_hotel_servers{
	server 10.200.4.102:8042;
    }
    upstream prodcal_local_servers{
 	server 10.200.4.102:8043;
    }
    upstream prodcal_routePackage_servers{
	server 10.200.4.102:8044;
    }
    upstream prodcal_routeSupplier_servers{
	server 10.200.4.102:8045;
    }
    upstream prodcal_ticket_servers{
	server 10.200.4.102:8046;
    }
    upstream prodcal_traffic_servers{
 	server 10.200.4.102:8047;
    }
    upstream prodcal_visa_servers{
 	server 10.200.4.102:8048;
    }
    upstream prodcal_wifi_servers{
	server 10.200.4.102:8049;
    }

     upstream cms_content_servers {
        server 10.200.4.102:8199;
    }
     upstream cmt_back_servers { 
	server 10.200.1.203:8118; 
    } 

     upstream cmt_front_servers { 
	server 10.200.1.203:8117; 
    } 

     upstream cmt_service_servers { 
	server 10.200.1.203:8119; 
    }
   upstream   vst_ticket_servers {
        server 10.200.4.102:8060;
   }
   upstream tnt_sback_servers {
        server 10.200.1.203:8022;
        }
   upstream vst_search_config_servers {
         server 10.200.4.102:8087;
     }
  upstream varnish {
         server 10.200.4.102:8087;
    }
  upstream vst_search_autocomplete {
         server 10.200.4.102:8087;
   }
   upstream channel_back_servers {
        server 10.200.1.203:8120;
   }
   upstream  channel_service_servers {
        server 10.200.1.203:8120;
   }
   upstream dest_hotel_dock_servers{
       server 10.200.4.102:8052;
  } 
   upstream dest_hotel_back_servers{
       server 10.200.4.102:8061;
  } 
   upstream dest_bridge_schedule_servers {
       server 10.200.4.102:8053;
   }

   upstream dest_service_servers {
        server 10.200.4.102:8051;
        }
  
   upstream dest_front_servers {
        server 10.200.4.102:8055;
        }
   upstream  security_servers {
        server 192.168.0.106:8082;
    }

   upstream dest_ebooking_servers {
        server 10.200.4.102:8056;
        }

   upstream   o2o_back_servers {
        server 10.200.4.102:8099;
    }
   upstream   o2o_front_servers {
        server 10.200.4.102:8098;
   }
   upstream   o2o_report_servers {
        server 10.200.4.102:8095;
   }
   upstream   o2o_cal_servers {
        server 10.200.4.102:8091;
   }
   upstream   pet_front_servers {
        server 10.200.1.203:8050;
   }

   upstream   tnt_price_servers {
        server 10.200.1.203:8026;
   }

   upstream tnt_client_servers { 
        server 10.200.1.203:8027; 
   }

   upstream tnt_cps_servers {
        server 10.200.1.203:8077;
   }

   upstream   fit_servers {
        server 10.200.4.34:30005;
   }
   upstream   user_server_services {
        server 10.200.1.203:8999;
   }

   upstream vst_hhs_service_servers {
      server 10.200.3.216:8080 weight=5;
   }
   
   upstream vst_prom_channel_bank_service_servers {
       server 10.200.3.216:8081 weight=5;
   }

   upstream vst_prom_channel_bank_admin_servers {
      server 10.200.3.215:8081 weight=5;
   }
   upstream vst_hhs_admin_servers {
       server 10.200.3.215:8080 weight=5;
   }


   upstream lvmm_log_servers {
        server 10.200.1.203:8059;
   }
   
   upstream ship_front_servers {
        server 10.200.4.110:8100;
   }
   upstream https_ship_front_servers {
        server 10.200.4.110:8443;
   }

   upstream ship_back_servers {
        server 10.200.4.110:8104;
   }

   upstream visa_front_servers {
        server 10.200.4.110:8101;
   }
   upstream https_visa_front_servers {
        server 10.200.4.110:8445;
   }
   
   upstream visa_prod_servers {
        server 10.200.4.110:8102;
   }

   upstream visa_order_servers {
        server 10.200.4.110:8103;
   }

   upstream lvmm_cms_back_servers {
        server 10.200.4.102:8063;
   }

   upstream vst_es_log_servers {
        server 10.200.4.110:8002;
   }
   upstream lvsm_server_services {
        server 10.200.3.140:8081;
   }
   upstream https_lvsm_server_services {
       server 10.200.3.140:8443;
   }

   upstream captcha_front_servers {
       server 10.200.4.110:8204;
   }
   
   upstream captcha_back_servers {
       server 10.200.4.110:8205;
   }
   
   upstream dynamic_report_servers {
       server 10.200.4.110:8206;
   }

   upstream report_ui_servers {
       server 10.200.4.110:8207;
   }
   
   upstream kettle_service_servers {
       server 10.200.4.110:8208;
   }
   upstream  https_o2o_front_servers {
        server 10.200.4.102:8443;
   }
    upstream  https_o2o_ms_servers {
        server 10.200.4.102:8444;
    }
    upstream  o2o_ms_servers {
        server 10.200.4.102:8092;
    }
    upstream https_vst_front_servers{
        server 10.200.4.102:8445;
    }

    upstream https_vst_order_servers{
        server 10.200.4.102:8446;
    }
   
    server {
        listen       10.200.1.203:80;
        server_name  _;
        #charset koi8-r;
        server_name_in_redirect off;
        proxy_set_header Host $http_host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header remote-port $remote_port;
	#userid on;
	#userid_name uid;
	#userid_domain lvmama.com;
	#userid_path /;
	#userid_expires 365d;
	#userid_p3p 'policyref="/w3c/p3p.xml", CP="CUR ADM OUR NOR STA NID"';	
	rewrite ^/clutter/push/(.*) /ebk_push/$1 last;


        if ( $host = "lvmama.com" ) {
                rewrite .*  http://www.lvmama.com permanent;
        }

        if ( $host = "lvmama.org" ) {
                rewrite .*  http://www.lvmama.com permanent;
        }

        if ( $host = "cmt.lvmama.com" ) {
                rewrite .*  http://www.lvmama.com/comment/ permanent;
        }
        if ( $host = "super.lvmama.com" ) {
                rewrite .*  http://super.lvmama.com/pet_back/ permanent;
        }
        if ( $host = "www.lvmama.org" ) {
                rewrite .*  http://www.lvmama.com permanent;
        }
	if ( $host = "sc.lvmama.com" ) {
		rewrite .*  http://www.lvmama.com/dest/zhongguo_sichuan/$1 permanent;
	}

        if ( $host = "bj.lvmama.com" ) {
                rewrite .*  http://www.lvmama.com/dest/zhongguo_beijing/$1 permanent;
        }

        if ( $host = "gd.lvmama.com" ) {
                rewrite .*  http://www.lvmama.com/dest/zhongguo_guangdong/$1 permanent;
        }

        if ($uri ~ ^/(.*)/remoting/(.*)$) {
            set $iftmp Y;
        }
        if ($remote_addr != 10.200.1.203) {  
           # set $iftmp "${iftmp}Y";
        }

        if ($iftmp = YY) {
               # return 403;
        }

        location /tnt_order/ {
             proxy_pass   http://tnt_order_servers/tnt_order/;
         }
        location / {
            proxy_pass   http://front_servers/;
        }
        location /zt {
            rewrite ^/zt/comment/(.*)$ /zt/suipian/dianpingshouye/zt/$1 last;
            root   /opt/nfsroot;
            index index.php index.html;
        }
        location /ebk_push/ {
            proxy_pass   http://ocs_servers/ebk_push/;
        }

	location /nsso/ {
            proxy_pass   http://front_servers/nsso/;
        }
	location /pet_sso/ {
            proxy_pass   http://front_servers/nsso/;
        }
        location /comment/ {
            rewrite ^/comment/ajax!getProductComments.do /comment/ajax/getProductComments.do last;
            rewrite ^/comment/zt/(.*)$ /zt/suipian/dianpingshouye/zt/$1 last;
            proxy_pass   http://front_servers/comment/;                                                           
        }
        location /search/ {
           proxy_pass   http://vst_search_servers/search/;
        }
        location /dest/ {
           rewrite /dest/comment/(.*) /comment/$1;
           rewrite /dest/(.*)/guide[/]?$ /guide/place/$1 permanent;
           proxy_pass   http://pc_servers/dest/;
        }
#	location /hotel/ {
#		rewrite /hotel/v([0-9]+) /dest/hotel/v$1;
#		proxy_pass http://pc_servers/;
#	}
        location  /client {
            #proxy_pass   http://pic_servers/client;
            proxy_pass   http://php_servers/client/;
        }
        location /payment/ {
            rewrite ^/payment/chinapay/asyn.do(.*)$ /payment/cp/asyn.do$1;
            rewrite ^/payment/chinapay.do(.*)$ /payment/cp.do$1;
            rewrite ^/payment/reconpay/chinapay_notify.do(.*)$  /finance/reconpay/chinapay_notify.htm$1;
            proxy_pass   http://payment_servers/payment/;
        }

	location /payfront/ {
	   proxy_pass http://payment_servers/payfront/;
	}

        location /passport/ {
            proxy_pass   http://ocs_servers/passport/;
        }
        location /message/ {
        proxy_pass   http://php_servers/message/;
        index index.php index.html;
        }
	location /lvyou/ {
        proxy_pass   http://php_servers/lvyou/;
        index index.php index.html;
        }
         location /ebooking/ {
            proxy_pass   http://ocs_servers/ebooking/;
        }
        location /abroadhotel/ {
            proxy_pass   http://report_servers/abroadhotel/;
        }
        location /clutter/ {
            proxy_pass   http://tnt_front_servers/clutter/;
        }

        location /seo/single/ {
            proxy_pass   http://back_servers/pet_back/;
        }
        location /super_back/ {                                                                                   
            proxy_pass   http://back_servers/super_back/;                                                         
        }                                                                                                         
        location /backend/ {                                                                                      
            proxy_pass   http://back_servers/pet_back/;                                                           
        }                                                                                                         

	location /vst_back/ {
	    proxy_pass  http://vst_back_servers/vst_back/;
	}
	location /vst_order/ {
            proxy_pass  http://vst_order_servers/vst_order/;
        }

	location /vst_workflow/ {
            proxy_pass  http://vst_order_servers/vst_workflow/;
        }
         
        location /vst_rest/ {
            proxy_pass   http://rest_servers/vst_rest/;
        }        

	location /vst_ebooking/ {
            proxy_pass  http://vst_ebk_servers/vst_ebooking/;
        }
	location /vst_pet/ {
	    proxy_pass  http://vst_pet_servers/vst_pet/;
	}
                                                                                                                  
	location /vst_passport/ {
            proxy_pass   http://vst_passport_servers/vst_passport/;
        }
	location /vst_prodcal/ {
        proxy_pass  http://vst_prodcal_servers/vst_prodcal/;
    }
	location /vst_prom/ {
     proxy_pass  http://vst_order_servers/vst_prom/;
	}
	location /interfacePlatform/ {
    proxy_pass  http://interfacePlatform_servers/interfacePlatform/;
	}

    	location /vst_supp/ {
	    proxy_pass http://vst_supp_servers/vst_supp/;
	}                                                                                                              
        location /pet_back/ {                                                                                     
            proxy_pass   http://back_servers/pet_back/;                                                           
        }                                                                                                         
                                                                                                                  
        location /finance/ {                                                                                      
            proxy_pass   http://back_servers/finance/;                                                            
        }                                                                                                         
                                                                                                                  
        location /finance/reconpay/ {                                                                             
            proxy_pass  http://back_servers/finance/reconpay/;                                                    
        }                                                                                                         
                                                                                                                  
        location /operate/ {                                                                                      
            proxy_pass   http://other_servers/operate/;                                                           
        }                                                                                                         
                                                                                                                  
        location /report/ {                                                                                       
            proxy_pass   http://report_servers/report/;                                                           
        }                                                                                                         
                                                                                                                  
        location /order/ {                                                                                        
            proxy_pass  http://super_service_servers/order/;                                                      
        }
        location /cash/ {                                                                                         
            proxy_pass  http://super_service_servers/cash/;                                                       
        }                                                                                                         

        location /tnt_back/ {
             proxy_pass   http://tnt_back_servers/tnt_back/;
         }
         location /tnt_dist/ {
             proxy_pass  http://tnt_servers/tnt_dist/;
         }

                                                                                                                  
        location /pet_public/ {                                                                                   
            proxy_pass  http://pet_service_servers/pet_public/;                                                   
        }                                                                                                         
                                                                                                                  
        location ~ \.php$ {                                                                                       
            fastcgi_index index.php;                                                                              
            fastcgi_pass   127.0.0.1:9000;                                                                        
            fastcgi_param  SCRIPT_FILENAME  /var/www/htdocs$fastcgi_script_name;                                  
            include        fastcgi_params;                                                                        
        }
        error_page  404              /404.html;                                                                   
        location = /404.html {                                                                                    
            root   /usr/share/nginx/html;                                                                         
        }                                                                                                         
                                                                                                                  
        # redirect server error pages to the static page /50x.html                                                
        #                                                                                                         
        error_page   500 502 503 504  /50x.html;                                                                  
        location = /50x.html {                                                                                    
            root   /usr/share/nginx/html;                                                                         
        }   
        location /playgame/ {
           root /opt/game/;
        }
	
 }


server {
        listen       10.200.1.203:80;
        server_name  www1.lvmama.com;
        server_name_in_redirect off;
        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP  $remote_addr;
        proxy_set_header X-Forwarded-For $http_x_forwarded_for;
        proxy_set_header remote-port $remote_port;
        location / {
            proxy_pass http://front2_servers/;
        }
    }
server {
        listen       10.200.1.203:80;
        server_name  openapi.lvmama.com;
     #   charset koi8-r;

        access_log  /var/log/nginx/rest.access.log  main;
        proxy_set_header Host $http_host;

        location /vst_rest/ {
            proxy_pass   http://rest_servers/vst_rest/;
        }
    }


     server {
        listen      10.200.1.203:80;
        server_name  open.lvmama.com;
        location / {
           proxy_pass http://tnt_platform_servers/;
           }

       }

server{
     listen 10.200.1.203:80;
     server_name youlun.lvmama.com;
     access_log  /var/log/nginx/youlun.access.log  main;
     server_name_in_redirect off;
     proxy_set_header Host $http_host;
     proxy_set_header X-Real-IP  $remote_addr;
     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
     proxy_set_header remote-port $remote_port;
     userid on;
     userid_name uid;
     userid_domain lvmama.com;
     userid_path /;
     userid_expires 365d;
     #rewrite ^/ship_front/order/cruise/createOrder.do  https://https_ship_front_servers/ship_front/order/cruise/createOrder.do;
         location ^/ship_front/order/cruise/createOrder.do {
              rewrite ^(.*)$  https://$host$1 permanent;
         }
	location ~* /brand/([0-9A-z]+)-([0-9A-z]+) {
        	 proxy_pass http://ship_front_servers/ship_front/youlun/brand-$1/$2;
        }
        location ~* /brand/([0-9A-z]+) {
        	 proxy_pass http://ship_front_servers/ship_front/youlun/brand-$1;
        }
        location  /cruise/ {
                 proxy_pass http://ship_front_servers/ship_front/youlun/;
        }        

     location /booking/{
	proxy_pass http://vst_search_servers/search/youlun/booking/;
    }

    location /youlun/line{
         proxy_pass http://vst_search_servers/search/youlun/line;
     }
       location /ship_front/{
        proxy_pass http://ship_front_servers/ship_front/;
       }

	location /youlun/{
         proxy_pass http://ship_front_servers/ship_front/youlun/;
     }
        location /{
         proxy_pass http://ship_front_servers/ship_front/youlun;
   }
     #   location /youlun/{
     #   proxy_pass http://vst_front_servers/vst_front/youlun/;
     # }
        
	location ~* /brand/([0-9A-z]+)-([0-9A-z]+)/comment {
		proxy_pass http://cmt_front_servers/cmt_front/youlun/brand-$1-$2/comment;
			
	}
}

server{
	 listen 10.200.1.203:443;
	 server_name youlun.lvmama.com;

	 server_name_in_redirect off;
	 proxy_set_header Host $http_host;
         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
         proxy_set_header X-Real-IP $remote_addr;
         proxy_set_header remote-port $remote_port;
         proxy_set_header X-Forwarded-Proto  $scheme;

         ssl                  on;
         ssl_certificate     /usr/local/ssl/cacert.pem;
         ssl_certificate_key /usr/local/ssl/privkey.pem;
         ssl_session_timeout  5m;
	    
       	location  /ship_front/order/cruise/createOrder.do {
            proxy_pass  https://https_ship_front_servers/ship_front/order/cruise/createOrder.do;
        }

       	location /ship_front/{
	        proxy_pass http://ship_front_servers/ship_front/;
	}

        location /{
        	proxy_pass http://ship_front_servers/ship_front/youlun;
   	}
}

    server {
        listen       10.200.1.203:80;
        server_name  piaoliu.lvmama.com;
        proxy_set_header remote-port $remote_port;
        location /sh{
            proxy_pass   http://pc_servers/pet_topic/zt/lvyou/piaoliu/sh;
        }
    }

server {
        listen       10.200.1.203:80;
        server_name  piclib.lvmama.com;
        server_name_in_redirect off;
        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP  $remote_addr;
        proxy_set_header X-Forwarded-For $http_x_forwarded_for;
        proxy_set_header remote-port $remote_port;
        location /pic {
            proxy_pass http://pic_lib_servers/pic;
        }
    }

	server{
		listen 10.200.1.203:80;
                server_name hotels.lvmama.com;
                access_log  /var/log/nginx/hotels.access.log  main;
                server_name_in_redirect off;
                proxy_set_header Host $http_host;
                proxy_set_header X-Real-IP  $remote_addr;
                #proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header X-Forwarded-For $remote_addr;
                proxy_set_header remote-port $remote_port;
                userid on;
                userid_name uid;
                userid_domain lvmama.com;
                userid_path /;
                userid_expires 365d;
                #proxy_intercept_errors on;
                #error_page 404 http://www.lvmama.com/404.jsp;

                rewrite ^/$ /hotel last;
		
		location /list/{
			#proxy_pass   http://127.0.0.1:8081/pet_search/verhotel/;
			proxy_pass   http://vst_search_servers/search/verhotel/;
		}
		
                location /book/{
                 proxy_pass   http://vst_front_servers/vst_front/book/;
                 }
                location /youlun/ajax/line-{
                        proxy_pass   http://vst_search_servers/search/youlun/ajax/line-;
                }
		
                location /ticket/{
                        proxy_pass http://vst_search_servers/search/v_ticket/;
                }
                location /route/{
                        proxy_pass http://vst_search_servers/search/v_route/;
                }
                location /freetour/{
                        proxy_pass http://vst_search_servers/search/v_freetour/;
                }
                location /around/{
                        proxy_pass http://vst_search_servers/search/v_around/;
                }
                location /local/{
                        proxy_pass http://vst_search_servers/search/v_local/;
                }
                location /group/{
                        proxy_pass http://vst_search_servers/search/v_group/;
                }
                location /search/ {
                        proxy_pass   http://vst_search_servers/search/;
                }
                location /{
                        proxy_pass   http://vst_search_servers/search/verhotel/;
                }
		 location =/hotel/{
                  proxy_pass http://dest_front_servers/dest-front/cmsnew/index/hotel-index;
                }
                 location /hotel/{
                        proxy_pass http://vst_front_servers/vst_front/hotel/;
                 }
                
                location /vst_front/{
                        proxy_pass http://vst_front_servers/vst_front/;
                }
                location /prod/{
                        proxy_pass http://vst_front_servers/vst_front/prod/;
                }

                 location ~* /hotel/comment-([0-9]+).html {
                        proxy_pass http://cmt_front_servers/cmt_front/hotel/comment-$1.html;
                }
	                location /order/ {
                        proxy_pass http://vst_front_servers/vst_front/order/;
                }
		location /favorite/{
               		proxy_pass http://vst_front_servers/vst_front/favorite/;
   		}


	}

#    server {
#	listen		10.200.1.203:80;
#	server_name	519.lvmama.com;
#	server_name_in_redirect off;
#	proxy_set_header Host $http_host;
#        proxy_set_header X-Real-IP  $remote_addr;
#        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#        proxy_set_header remote-port $remote_port;
#        userid on;
#        userid_name uid;
#        userid_domain lvmama.com;
#        userid_path /;
#        userid_expires 365d;
#	location =/ {
#		#rewrite / /index.html break;
#		proxy_pass http://front_servers/519dacun/index.html;
#	}
#    }

#--主会场
server {
        listen          10.200.1.203:80;
        server_name  519.lvmama.com;
        server_name_in_redirect off;
        proxy_set_header Host $http_host;
        access_log  /var/log/nginx/519.lvmama.com.access.log  main;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header remote-port $remote_port;
        userid on;
        userid_name uid;
        userid_domain lvmama.com;
        userid_path /;
        userid_expires 365d;

#--邮轮
        location /youlun/ {
              proxy_pass   http://519_servers/anniversary/cruise.html;
        }
#--360
        location /360/  {
              proxy_pass   http://519_servers/anniversary/index360.html;
        }

#--自由行
        location /ziyouxing/ {
              proxy_pass   http://519_servers/anniversary/freeindex.html;

        }
#--门票
       location /menpiao/ {
              proxy_pass   http://519_servers/anniversary/ticketindex.html;
        }
#--出境
        location /chujing/ {
              proxy_pass   http://519_servers/anniversary/abroadindex.html;

        }
#--国内
        location /guonei/ {
              proxy_pass   http://519_servers/anniversary/longindex.html;
        }

        location =/ {
              proxy_pass   http://519_servers/anniversary/index.html;
        }
    }

    server {
        listen       10.200.1.203:80;
        server_name  www.lvmama.com;
	server_name  www.googleadservices.com;
	server_name  login.lvmama.com;
        access_log       /var/log/nginx/www_access.log              main;

        server_name_in_redirect off;
        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP  $remote_addr;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header remote-port $remote_port;
        userid on;
        userid_name uid;
        userid_domain lvmama.com;
        userid_path /;
        userid_expires 365d;
        userid_p3p 'policyref="/w3c/p3p.xml", CP="CUR ADM OUR NOR STA NID"';

       # if ( $host = "www.lvmama.com/ticket" ) {
       #         rewrite ^/$  http://ticket.lvmama.com  permanent;
       # }
        rewrite ^/ticket$  http://ticket.lvmama.com  permanent;
        rewrite ^/index.htm$ http://www.lvmama.com;
        rewrite ^/robots.txt$  /pet_topic/seoUpLoadFile/www/robots.txt last;
        rewrite ^/sitemap.xml$ /pet_topic/seoUpLoadFile/www/sitemap.xml last;

	rewrite ^/zt/s/(\d+)-(\d+)-(\d+)$ /info/zhuanti/index.php?page=$1&placeTag=$2&threadTag=$3 last;
	rewrite ^/uploadfile/(.*) http://iguide.lvmama.com/uploadfile/$1 permanent;
	rewrite ^/zt/promo/tangdashi[/]$ http://tangdashi.lvmama.com/$1 permanent;
	rewrite ^/zt/promo/tangdashi/md.php$ http://tangdashi.lvmama.com/jiangpin/$1 permanent;
	rewrite ^/zt/promo/tangdashi/cy.php$ http://tangdashi.lvmama.com/zuopin/$1 permanent;
	rewrite ^/guide/uploadfile/(.*) http://iguide.lvmama.com/uploadfile/$1 permanent;
	rewrite ^/pdf/(.*) http://iguide.lvmama.com/pdf/$1 last;
	rewrite ^/public/jobs /others/yingcai/jobs.php;
	rewrite ^/promo(.*) /zt/promo$1;
	rewrite ^/activity/morijifen/ http://www.lvmama.com/404.jsp;
	rewrite ^/activity/lvyouxinyuan/ http://www.lvmama.com/404.jsp;
	rewrite ^/activity(.*) /zt/promo/activity$1;
	rewrite ^/place(.*) /public/index$1;
	rewrite ^/super(.*) /$1;
	rewrite ^/dest/place/placeInfo.do http://www.lvmama.com;
	rewrite ^/dest/place/place.do  http://www.lvmama.com;
	rewrite ^/dest/place/gonglue!publishGonglue.do  http://www.lvmama.com;
	rewrite ^/dest/newplace/scenic.do http://www.lvmama.com;
	rewrite ^/pet_back/login.do http://www.lvmama.com;
	rewrite ^/dest/(.*)/weather$ http://www.lvmama.com/weather permanent;
	rewrite ^/main/myspace/mySpace!cashChangeLogList.do http://www.lvmama.com;
	
	
	rewrite ^/nsso/register/verification.do http://www.lvmama.com;
	rewrite ^/login.lvmama.com/nsso/register/verification.do http://www.lvmama.com;
	rewrite ^/NoteAction.do http://www.lvmama.com;
	rewrite ^/clubsaction/index/f2d0c29a1e47cdc8011e4d4a835c22fb.htm  http://www.lvmama.com;
	rewrite ^/clubsaction/index/clubsaction!leaveWord.do   http://www.lvmama.com;
	rewrite ^/comment/zt/aidingke/(.*) http://www.lvmama.com/404.jsp;
	rewrite ^/ajax/ajax!topInfo.do   http://www.lvmama.com;
	rewrite ^/sina/sina.do   http://www.lvmama.com;
        rewrite ^/newsitemap.xml$ /newsite/sitemap.xml last;

        rewrite ^/youlun/brand-([0-9A-z]+)-([0-9A-z]+)[/]?$ http://youlun.lvmama.com/brand/$1-$2 permanent;
        rewrite ^/youlun/brand-([0-9A-z]+)[/]?$ http://youlun.lvmama.com/brand/$1 permanent;
        rewrite ^/youlun/([0-9]+)[/]?$ http://youlun.lvmama.com/cruise/$1 permanent;
	rewrite ^/youlun[/]?$ http://youlun.lvmama.com/ permanent;
	rewrite ^/youlun/brand-([0-9A-z]+)-([0-9A-z]+)/comment[/]?$ http://youlun.lvmama.com/brand/$1-$2/comment permanent;
       

        rewrite ^/nsso/login(.*) https://login.lvmama.com/nsso/login;
        rewrite ^/nsso/register/registering.do(.*) https://login.lvmama.com/nsso/register/registering.do;
        rewrite ^/nsso/union/callback.do(.*) https://login.lvmama.com/nsso/union/callback.do;
        rewrite ^/nsso/union/binding.do(.*) https://login.lvmama.com/nsso/union/binding.do;
        rewrite ^/nsso/union/moreUnionLogin.do(.*) https://login.lvmama.com/nsso/union/moreUnionLogin.do;
        rewrite ^/nsso/findpass/(.*) https://login.lvmama.com/nsso/findpass/$1 permanent;
        rewrite ^/nsso/findPassword/(.*) https://login.lvmama.com/nsso/findPassword/$1 permanent;
        rewrite ^/nsso/$ https://login.lvmama.com/nsso/login;

        if ( $host = "login.lvmama.com" ) {
                rewrite ^/$  http://login.lvmama.com/nsso/ permanent;
        }
        #rewrite ^/nsso/login(.*) https://login.lvmama.com/nsso/login;
        location / {
		if ( $request_uri ~* ^/\?([0-9]+)$ ) 
			{ 
			rewrite (.*) /? permanent; 
			}
	    proxy_pass http://front_servers/;
        }
        
	location ~* /visa/visa-([0-9]+).html {
            proxy_pass http://visa_front_servers/visa_front/visa/showVisaBranchDetail.do?productBranchId=$1;
        }

 	location /visa_front/order/visa/create.do {
            rewrite ^(.*)$  https://$host$1 permanent;
        }

        location /visa/ { 
            proxy_pass http://visa_front_servers/visa_front/visa/;
        }

        location /visa_front/{
         proxy_pass http://visa_front_servers/visa_front/;
        }

        location /intcar/ {
            proxy_pass http://vst_front_servers/vst_front/intcar/;
        }	

        location /search/configInfo/ {
	proxy_pass	http://vst_master_servers/search/configInfo/;
		}

	location /search/configInfo/masterprop/ {
	proxy_pass	http://vst_master_servers/search/configInfo/masterprop/;
		}
		
	location /search/configInfo/varnishprop/ {
	proxy_pass	http://vst_search_servers/search/configInfo/varnishprop/;
		}		

	location /search/configInfo/searchprop/ {
	proxy_pass	http://vst_search_servers/search/configInfo/searchprop/;
		}

	location /search/configInfo/hotelprop/ {
	proxy_pass	http://vst_search_servers/search/configInfo/hotelprop/;
		}
		
	location /search/configInfo/autoprop/ {
	proxy_pass	http://vst_search_servers/search/configInfo/autoprop/;
		}
        
        location /Businesses/ {
            proxy_pass   http://other_servers/Businesses/;
        }
	location /travel/ {
            proxy_pass   http://front_servers/travel/;
        }
        #location /search/autocomplete/ {
        #   	proxy_pass   http://vst_search_servers/search/;
        #}
        location /search/ {
           expires 1d;
           	proxy_pass   http://vst_search_servers/search/;
        }
        location /search/autocomplete/ {
           	proxy_pass   http://vst_master_servers/search/;
        }

    	location /youlun/line{
         proxy_pass http://vst_search_servers/search/youlun/line;
    	}
	location /youlun/{
         proxy_pass http://ship_front_servers/ship_front/youlun/;
        }
	#location /company/{
        # proxy_pass http://vst_front_servers/vst_front/customized/;
        #}
         location /vst_front/order/route/create.do {
            rewrite ^(.*)$  https://$host$1 permanent;
        }

     	location /vst_front/{
         proxy_pass http://vst_front_servers/vst_front/;
     	}
        location /pet_front/{
         proxy_pass http://pet_front_servers/pet_front/;
        }
	location /hotel/ {
#		proxy_pass http://vst_front_servers/vst_front/hotel/;
               rewrite ^/(.*)$ http://hotels.lvmama.com/$1 permanent;
	}
	#location /hotel/ {
        #        rewrite /hotel/v([0-9]+) /dest/hotel/v$1;
        #        proxy_pass http://pc_servers/;
        #}
	
        location /static/ {
            root /var/www/webapps/comment_static/;
        }
        location /dest/ {
           proxy_cache NAME;
           proxy_cache_valid 200 302 301 5m;
           proxy_cache_min_uses 1;
           proxy_cache_use_stale error timeout invalid_header http_500;
	   if ($http_user_agent ~* "Iphone") { rewrite . http://www.lvmama.com/info/ break;} 
           rewrite /dest/comment/(.*) /comment/$1;
	   rewrite /dest/(.*)/guide[/]?$ /guide/place/$1 permanent;
           proxy_pass   http://pc_servers/dest/;
	}
        location /lvyou/ {
            proxy_pass   http://php_servers/lvyou/;
            index index.php index.html;
        }
	location /guide/ {
            proxy_pass   http://php_servers/guide/;
	    index index.php index.html;
        }
	location /trip/ {
            proxy_pass   http://php_servers/trip/;
	    index index.php index.html;
        }
#        location /company/ {
#         proxy_pass   http://php139_servers/company/;
#         index index.php index.html;
#        }

	location /message/ {
            proxy_pass   http://php_servers/message/;
            index index.php index.html;
        }
	location /weather/ {
            proxy_pass   http://php_servers/weather/;
            index index.php index.html;
        }
	location /info/ {
            proxy_pass   http://php_servers/info/;
        }
	location /info2/ {
            proxy_pass   http://php_servers/info2/;
        }
        location =/others/big_client/bigclient_manage/login.php {
		return 403;
        }
	location /zt/subject/ {
            proxy_pass   http://php_servers/others/zt/index.php/subject/;
        }
	location /zt/s/ {
            proxy_pass   http://php_servers/info/zhuanti/;
        }
	location /zt/s/uploadfile/ {
            proxy_pass   http://php_servers/info/uploadfile/;
        }
        location /zt/promo/ {
        proxy_pass   http://php_servers/promo/;
        index index.php index.html;
        }

        location /others/ { 
            rewrite ^/others/lp/index.html(.*)   http://m.lvmama.com/rewrite/proxy.php$1;
            proxy_pass   http://php_servers/others/;
       	    index index.php;
	}
#        location /globalhotel/ { 
 #          proxy_pass   http://hotel_servers/globalhotel/ ;
  #      }
	location /sd/ {
            proxy_pass   http://php_servers/sd/;
        }
        location /st/ {
            proxy_pass   http://php_servers/st/;
        }

        location /go/ {
            proxy_pass   http://php_servers/go/;
        }
        location /hd {
            proxy_pass   http://pic_servers/lp;
        }
        location  /uploads {
            proxy_pass   http://pic_servers/uploads;
        }
	
        location  /zt {
		proxy_pass   http://pic_servers/zt;
        }
        location  /userfiles {
            proxy_pass   http://pic_servers/userfiles;
        }
        location  /uploads1 {
            proxy_pass   http://pic_servers/uploads1;
        }
        location  /client {
        	rewrite ^/client/other/sms.html(.*)   http://m.lvmama.com/rewrite/proxy.php$1;
            proxy_pass   http://php_servers/client/;
        }
        location  /pass {
            proxy_pass   http://pic_servers/pass;
        }
        location /pet_topic/ {
            proxy_pass   http://pc_servers/pet_topic/;
        }

	location /tuangou/api/ {
            proxy_pass   http://10.200.1.203:8037/pet_back/tuangou/api/;
        }

	location /public/site_map {
            proxy_pass http://pc_servers/dest/public/site_map;
        }
        location /public/help {
            proxy_pass http://front_servers/public/help;
        }
        location /edm/baimingdan {
            proxy_pass http://pic_servers/zt/promo/baimingdan;
        }
	location /public/ {
	    proxy_pass   http://pc_servers/pet_topic/public/;
	}

        location /zt/lvyou/ {
            proxy_pass   http://pc_servers/pet_topic/zt/lvyou/;
        }
	location /localfun/ {
            proxy_pass http://vst_front_servers/vst_front/localfun/;
        }

        location /tnt_order/ {
            proxy_pass   http://tnt_order_servers/tnt_order/;
        }
        location /destroute/ {
                proxy_pass   http://vst_front_servers/vst_front/guoneiyou3;
        }  
      	location /sanya/ {
		proxy_pass   http://vst_front_servers/vst_front/sanyayou/;
	}

	location /tnt_taobao/ {
             proxy_pass   http://tnt_taobao_servers/tnt_taobao/;
        }
	location /tnt_price/ {
             proxy_pass   http://tnt_price_servers/tnt_price/;
        }

        location /cmt_back/ { 
	    proxy_pass http://cmt_back_servers/cmt_back/; 
        } 

        location /cmt_dist/ { 
            proxy_pass http://cmt_service_servers/cmt_dist/; 
        }

        location /cmtBusiness/ { 
	    proxy_pass http://cmt_back_servers/cmtBusiness/; 
        }

        location /comment/ { 
	    proxy_pass http://cmt_front_servers/cmt_front/comment/;
        }
        location /cmt_front/ { 
	proxy_pass http://cmt_front_servers/cmt_front/; 
        }
         location ~* /youlun/brand-([0-9a-z]+)-([0-9a-z]+)/comment{
            proxy_pass http://cmt_front_servers/cmt_front/youlun/brand-$1-$2/comment;
        }
          location ~* /lvyou/poi/comment-([a-z0-9]+)-([0-9]+).html {
             proxy_pass http://cmt_front_servers/cmt_front/lvyou/poi/comment-$1-$2.html;
        }
          location ~* /lvyou/comment/d-([a-zA-Z]+)([0-9]+).html{
            proxy_pass http://cmt_front_servers/cmt_front/lvyou/comment/d-$1$2.html;
        }
          location /newsitemap/ {
         proxy_pass   http://tnt_front_servers/tnt_api/sitemap/pet_topic/sitemap/;
         }
          location /newsite/ {
         proxy_pass   http://tnt_front_servers/tnt_api/sitemap/pet_topic/;
        }
            location  /zt/lvyou/zhoubianyou/ {
        proxy_pass   http://vst_front_servers/vst_front/moreActivity;
        }

        location /zhoubianyou/ {
        proxy_pass   http://vst_front_servers/vst_front/zhoubianyou;
         }

        location /freetour/ {
         proxy_pass   http://vst_front_servers/vst_front/freetour;
        } 
        location /sitemap/ {
         proxy_pass   http://pc_servers/pet_topic/seoUpLoadFile/www/sitemap/;
        }
        location /abroad/ {
         proxy_pass   http://vst_front_servers/vst_front/abroad;
         }
        location /wifi/ {
	  proxy_pass http://vst_front_servers/vst_front/wifi/;
	}
        location /user_credit/ {
            proxy_pass  http://user_credit_server_servers/user_credit/;
        } 

	location /phcard/ {
	  proxy_pass http://vst_front_servers/vst_front/phcard/;
	}
	location /search/autocomplete1/ {
        proxy_pass http://vst_search_servers_sol/search/autocomplete/;
        }

	location /seo_api/ {
             proxy_pass http://seo_api_servers/seo_api/;
         }
	location /local/ {
		proxy_pass   http://vst_front_servers/vst_front/dangdiyou;
	}
	location /customizedSearch/ {
 		 proxy_pass http://vst_front_servers/vst_front/customizedSearch/;
	}

	location /customized/ {            
		proxy_pass http://vst_front_servers/vst_front/customized/;
	}
	location /around/ {
		proxy_pass   http://vst_front_servers/vst_front/zbyou;
	}
	location /captcha/ {
                proxy_pass   http://captcha_front_servers/captcha-front/;
        }



         location ~ (.*?)/search_group/(.*?)/(.*) {
                    proxy_http_version 1.1;
                    proxy_set_header Upgrade $http_upgrade;
                    proxy_set_header Connection "Upgrade";
                    proxy_pass        http://$2/$1/search_group/$3;
                   }
        
      


    }
    server {
        listen    10.200.1.203:80;
        server_name  yy.lvmama.com;

        access_log  /var/log/nginx/yy.lvmama.com.access.log  main;

        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header remote-port $remote_port;

        location / {
               proxy_pass http://www.lvmama.com/tuangouyuyue;
               index download.html index.php index.html;
        }
   }

    server {
        listen       10.200.1.203:80;
        server_name  m.lvmama.com;
        server_name  yd.lvmama.com;
        server_name  3g.lvmama.com;
        server_name  qing.lvmama.com;
        server_name  wap.lvmama.com;
        server_name_in_redirect off;

        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP  $remote_addr;
        proxy_set_header remote-port $remote_port;
        access_log       /var/log/nginx/mobile.access.log              main;
        error_log  /var/log/nginx/mobile.error.log debug;

        rewrite ^/robots.txt$  /pet_topic/seoUpLoadFile/mLvmama/robots.txt last;
        rewrite ^/sitemap.xml$ /pet_topic/seoUpLoadFile/mLvmama/sitemap.xml last;
        rewrite ^/m/buy/prodDetail.do(.*)   http://www.lvmama.com;
        rewrite ^/app/down.html   /rewrite/proxy.php$1;
        rewrite ^/download[/]?$   /rewrite/proxy.php$1;
        rewrite ^/download/(.*)$   /rewrite/proxy.php$1;
        rewrite ^/m/buy/productCharacter.do(.*)   http://www.lvmama.com;
#        rewrite ^/$ /clutter/index.htm;
        rewrite   ^/app[/]?$  /client/other/sms.html;
        rewrite   ^/apps[/]?$   /client/datas/mobile/index.html;
	rewrite ^/appcp[/]?(.*)  http://m.lvmama.com/activity/index.php?s=/AppCp/toDownload$1;
	rewrite ^/$ /index/;
        #location = /app/down.html  {
                #proxy_pass   http://front_servers/m/;
                #if ($http_user_agent ~* "Nokia") { rewrite . http://www.lvmama.com/client/other/sms.html?c=1&r=2 break; }
                #if ($http_user_agent ~* "Iphone") { rewrite . http://www.lvmama.com/client/other/sms.html?c=1&r=2 break; }
                #if ($http_user_agent ~* "Ipad") { rewrite . http://www.lvmama.com/client/other/sms.html?c=1&r=2 break; }
                #if ($http_user_agent ~* "Mobile") { rewrite . http://www.lvmama.com/client/other/sms.html?c=1&r=2 break; }
                #if ($http_user_agent ~* "SAMSUNG") { rewrite ^/$ http://www.lvmama.com/client/other/sms.html?c=1&r=2 break; }
                #if ($http_user_agent ~* "SonyEricsson") { rewrite ^/$ http://www.lvmama.com/client/other/sms.html?c=1&r=2 break;}
                #if ($http_user_agent ~* "MOT") { rewrite ^/$ http://www.lvmama.com/client/other/sms.html?c=1&r=2 break; }
                #if ($http_user_agent ~* "BlackBerry") { rewrite ^/$ http://www.lvmama.com/client/other/sms.html?c=1&r=2 break; }
                #if ($http_user_agent ~* "LG") { rewrite ^/$ http://www.lvmama.com/client/other/sms.html?c=1&r=2 break; }
                #if ($http_user_agent ~* "HTC") { rewrite ^/$ http://www.lvmama.com/client/other/sms.html?c=1&r=2 break; }
                #if ($http_user_agent ~* "J2ME") { rewrite ^/$ http://www.lvmama.com/client/other/sms.html?c=1&r=2 break; }
                #if ($http_user_agent ~* "Opera Mini") { rewrite ^/$ http://www.lvmama.com/client/other/sms.html?c=1&r=2 break; }
                #rewrite . http://www.lvmama.com/others/lp/index.html?c=1&r=2;
         #       rewrite . http://in.lvmama.com/client/rewrite/proxy.php;
        #}
	location / { 
 	 if (!-e $request_filename) { 
	  rewrite ^/(.*)$ /cms/index.php?s=$1 last; 
	  break; 
	 } 
	}
        location /m/ {
          rewrite ^/(.*)   http://www.lvmama.com;
          proxy_pass   http://front_servers/m/;
        }
        #location /passport/ {
        #        proxy_pass   http://ocs_servers/passport/;
        #}
        location /super/ {
                rewrite ^/super/m/(.*)   http://www.lvmama.com;
                proxy_pass   http://front_servers/;
        }
	
	location /api/ {
        proxy_pass http://3g_servers/client-service/;
        }
	

        location /rewrite/ {
                proxy_pass   http://php1_servers/rewrite/;
		index proxy.php;
        }
        location /activity/ {
                proxy_pass   http://php1_servers/activity/;
		index index.php;
        }
        location /client/ {
                proxy_pass   http://php1_servers/client/;
        }
        location /static/ {
                proxy_pass   http://php1_servers/static/;
        }

	location /weixin/ { 
	proxy_pass http://php1_servers/client/weixin/; 
	}
        location /clutter/ {
                proxy_pass   http://client_clutter/clutter/;
		break;
        }

        location /img/ {
                proxy_pass   http://pic_servers/client/datas/mobile/img/;
        }
        location /tnt_order/ {
             proxy_pass   http://tnt_order_servers/tnt_order/;
	}
        #location /download/ {
        ##        if ($http_user_agent ~* "Windows 98") { rewrite . http://shouji.lvmama.com break; }
        #        if ($http_user_agent ~* "Windows ME") { rewrite . http://shouji.lvmama.com break; }
        #        if ($http_user_agent ~* "Windows 2000") { rewrite . http://shouji.lvmama.com break; }
        #        if ($http_user_agent ~* "Windows XP") { rewrite . http://shouji.lvmama.com break; }
        #        if ($http_user_agent ~* "Windows NT") { rewrite . http://shouji.lvmama.com break; }
        #        if ($http_user_agent ~* "Ubuntu") { rewrite . http://shouji.lvmama.com break; }
        #        if ($http_user_agent ~* "Windows 7") { rewrite . http://shouji.lvmama.com break; }
        #       proxy_pass http://php_servers/download/;
        #       index download.html index.php index.html;
        #}
        location /apk/ {
               proxy_pass http://php_servers/apk/;
               index download.html index.php index.html;
        }
	location /cms/ { 
	proxy_pass http://192.168.0.95:6060/client/cms_api/; 
	}

	location /tuan/ {
	       proxy_pass   http://client_clutter/clutter/groupbuy/;
	}

	
        location /clutter/route/ {
                rewrite /clutter/route/(.*)  /product/$1/ permanent;
        }

	location /hotel/ {
	        proxy_pass   http://client_clutter/clutter/hotel/;
	}

	location /user/ {
	        proxy_pass   http://client_clutter/clutter/my/;
	}


	location /product/ {
		proxy_pass http://client_clutter/clutter/route/;
	}


	location /channel/car/ { 
	proxy_pass http://client_clutter/clutter/drivingtravel;
        }	 

	location /ticket/near/ {
	    proxy_pass   http://client_clutter/clutter/spotticket/stnearby.htm?channelType=CMSSTNEAR;
	}

	location /clutter/place/ { 
	rewrite /clutter/place/(.*) /ticket/piao-$1/ permanent; 
	} 

	location /clutter/ticket/ { 
	rewrite (.*) /ticket/ permanent; 
	} 

	location /clutter/groupbuy/ { 
	rewrite /clutter/groupbuy/(.*) /tuan/$1/ permanent; 
	} 


	location /channel/about/about_us/ { 
	proxy_pass http://client_clutter/clutter/aboutus/about_us.htm; 
	} 

	location /channel/about/suggestion/ { 
	proxy_pass http://client_clutter/clutter/aboutus/suggestion.htm; 
	} 

	location ~*/ticket/piao-([0-9]+)[/]? { 
	proxy_pass http://client_clutter/clutter/place/$1; 
	} 

	location /pet_topic/ {
            proxy_pass   http://pc_servers/pet_topic/;
        }

        location /sitemap/ {
         proxy_pass   http://pc_servers/pet_topic/seoUpLoadFile/mLvmama/sitemap/;
        }

       location =/shenma-site-verification.txt{             
            proxy_pass   http://pc_servers/pet_topic/seoUpLoadFile/mLvmama/shenma-site-verification.txt;   
       }

	location /tnt_taobao/ {
             proxy_pass   http://tnt_taobao_servers/tnt_taobao/;
        }

	location /tnt_price/ {
             proxy_pass   http://tnt_price_servers/tnt_price/;
        }
	}
    server {
        listen    10.200.1.203:80;
        server_name  d.lvmama.com;

        access_log  /var/log/nginx/d.lvmama.com.access.log  main;

        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header remote-port $remote_port;

        location / {
               proxy_pass http://php_servers/download/;
               index download.html i   upstream cmt_service_servers ndex.php index.html;
               index download.html i   upstream cmt_service_servers ndex.php index.html;
        }
   }
    server {
        listen       10.200.1.203:80;
        server_name  dest.lvmama.com;
        server_name  search.lvmama.com;
        server_name_in_redirect off;
        proxy_set_header Host $http_host;
        proxy_set_header  X-Real-IP  $remote_addr;
                proxy_set_header remote-port $remote_port;
       rewrite ^/baidu_verify_vZmJ1lJNYM.html$ http://www.lvmama.com/baidu_verify_vZmJ1lJNYM.html;
        rewrite ^/dest/(.*)$ http://www.lvmama.com permanent;
        rewrite ^/comment/(.*)$ http://www.lvmama.com permanent;
        rewrite /place([0-9]+) /dest/place$1;
        rewrite /place/placeinfo.do(.*) /search/placeInfo.do$1;
        rewrite /search/(.*)        http://www.lvmama.com/search/$1 permanent;

        location / {
        	rewrite ^/(.*) http://www.lvmama.com/;
        }

        location /dest { 
                rewrite ^/dest/place([0-9]+) http://www.lvmama.com/dest/place$1 permanent; 
        }
        location /zt/prod/ {
                proxy_pass       http://vst_search_servers/search/zt/prod/;
        }
    	location /lp/ { 
		proxy_pass http://pc_servers/pet_topic/lp/; 
	}
         location /baidu_verify_vZmJ1lJNYM.html/ {
            proxy_pass   http://front_servers/baidu_verify_vZmJ1lJNYM.html;
          }
}

    server {
        listen       10.200.1.203:80;
        server_name  sanya.lvmama.com;
        proxy_set_header remote-port $remote_port;
        location / {
            proxy_pass   http://pc_servers/pet_topic/zt/lvyou/sanyaminset/;
        }
        location ~^/wd.html$ {
            proxy_pass   http://www.lvmama.com/zt/promo/sanya/$1;
        }
    }
   server {
        listen       10.200.1.203:80;
        server_name  ticket.lvmama.com;
        rewrite ^/(.*)/$ /$1 permanent;
        rewrite ^/newsitemap.xml$ /newsite/sitemap.xml last;
        rewrite ^/scenic-100771$ http://ticket.lvmama.com/scenic-158 permanent;

                server_name_in_redirect off;
                proxy_set_header Host $http_host;
                proxy_set_header X-Real-IP  $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header remote-port $remote_port;
                userid on;
                userid_name uid;
                userid_domain lvmama.com;
                userid_path /;
                userid_expires 365d;	
        #location /a {
        #    proxy_pass    http://vst_search_servers/search/ticket/a;
        #}
        proxy_set_header  X-Real-URL  '$host:$server_port $request';
        location / {
            proxy_pass    http://front_servers/;
        }

        location /comment/ {
            proxy_pass    http://vst_front_servers/vst_front/comment/;
        }
       location  /food-{
 	   proxy_pass http://vst_front_servers/vst_front/food-;
	}
	location  /shop-{
	    proxy_pass http://vst_front_servers/vst_front/shop-;
	}
	location  /play-{
   	     proxy_pass http://vst_front_servers/vst_front/play-;
	}

        location /a- {
        proxy_pass    http://vst_search_servers/search/v_ticket/a-;
        }
        location /p- {
        proxy_pass http://vst_front_servers/vst_front/p-;
        }
        location /scenic- {
        proxy_pass http://vst_front_servers/vst_front/scenic-;
        }
        location /collect/ {
        proxy_pass http://vst_front_servers/vst_front/collect/;
        }
        location /s- {
            proxy_pass http://vst_search_servers/search/v_ticket/s-;
        }
        location ~ ^/scenic-([0-9]+)/comment$ {
            proxy_pass http://cmt_front_servers/cmt_front/scenic-$1/comment;
        }
        location /ticket/ {
	    proxy_pass    http://vst_front_servers/vst_front/ticket/;
	}
       #location /sitemap.xml/ {
       #     proxy_pass   http://tnt_front_servers/tnt_api/super_front/sitemap.xml;
       # }
       #location /sitemap/ {
       #     proxy_pass   http://tnt_front_servers/tnt_api/super_front/sitemap/;
       # }
        location /newsitemap/ {
            proxy_pass   http://tnt_front_servers/tnt_api/sitemap/super_front/sitemap/;
        }
        location /newsite/ {
            proxy_pass   http://tnt_front_servers/tnt_api/sitemap/super_front/;
        }       
       location /vst_front/ {
            proxy_pass    http://vst_front_servers/vst_front/;
        }
       location  /traffic-{
            proxy_pass http://vst_front_servers/vst_front/traffic-;
       }
       location /show-{
             proxy_pass http://vst_front_servers/vst_front/show-;
       }
                                 


    }


server {
        listen       10.200.1.203:80;
        server_name  ticket1.lvmama.com;
                server_name_in_redirect off;
                proxy_set_header Host $http_host;
                proxy_set_header X-Real-IP  $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header remote-port $remote_port;
        location / {
            proxy_pass    http://pc_servers/dest/;
        }
        location /a- {
        proxy_pass    http://vst_search_servers/search/v_ticket/a-;
        }
        location /scenic- {
        proxy_pass http://vst_front_servers/vst_front/scenic-;
        }
    }

    server {
        listen       10.200.1.203:443;
        server_name  pay.lvmama.com;

        server_name_in_redirect off;
        proxy_set_header Host $http_host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header remote-port $remote_port;
        error_log  /var/log/nginx/super_error.log notice;
        ssl                  on;
        ssl_certificate     /usr/local/ssl/ca-cert.pem;
        ssl_certificate_key /usr/local/ssl/ca-key.pem;
        
        ssl_session_timeout  5m;

        location /payment/ {
            rewrite ^/payment/chinapay/asyn.do(.*)$ /payment/cp/asyn.do$1;
            rewrite ^/payment/chinapay.do(.*)$ /payment/cp.do$1;
            proxy_pass   https://https_payment_servers/payment/;
        }
        location /payfront/ {
            proxy_pass https://https_payment_servers/payfront/;
        }
        }

    server {
        listen       10.200.1.203:80;
        server_name  sichuan.lvmama.com;
        proxy_set_header remote-port $remote_port;
        location / {
	        proxy_pass   http://pc_servers/pet_topic/indexPakage/ztStationAction.do?blockId=12034&station=LP&ztname=chengdu&fname=chengdu;
        }

        location ~^/chengdu.html$ {
        proxy_pass   http://pc_servers/pet_topic/indexPakage/ztStationAction.do?blockId=12034&station=LP&ztname=chengdu&fname=chengdu$1;
        }
        location ~^/jzg.html$ {
        proxy_pass   http://pc_servers/pet_topic/indexPakage/ztStationAction.do?blockId=12034&station=LP&ztname=chengdu&fname=jzg$1;
        }
        location ~^/xz.html$ {
        proxy_pass   http://pc_servers/pet_topic/indexPakage/ztStationAction.do?blockId=12034&station=LP&ztname=chengdu&fname=xz$1;
        }
        location ~^/cq.html$ {
        proxy_pass   http://pc_servers/pet_topic/indexPakage/ztStationAction.do?blockId=12034&station=LP&ztname=chengdu&fname=cq$1;
        }
        location ~^/(.*)$ {
        proxy_pass   http://pc_servers/pet_topic/indexPakage/ztStationAction.do?blockId=12034&station=LP&ztname=chengdu&fname=chengdu$1;
        }
    }

    server {
        listen       10.200.1.203:80;
        server_name  super.lvmama.com;
	server_name  test.lvmama.com;
        server_name  pay.lvmama.com;
	server_name_in_redirect off;
        proxy_set_header Host $http_host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    	proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header remote-port $remote_port;
	error_log  /var/log/nginx/super_error.log notice;

	if ($uri ~ ^/(.*)/remoting/(.*)$) {
	    set $iftmp Y;
	}
    	if ($remote_addr != 10.200.1.203) { 
	}

	if ($iftmp = YY) {
	}

	location / {
            rewrite ^/$     /pet_back/;
            root /var/www/html;
        }


	location /payment/ {
            rewrite ^/payment/chinapay/asyn.do(.*)$ /payment/cp/asyn.do$1;
            rewrite ^/payment/chinapay.do(.*)$ /payment/cp.do$1;
            proxy_pass   http://payment_servers/payment/;
        }
	location /payfront/ {
           proxy_pass http://payment_servers/payfront/;
        }


        location /tnt_order/ {
            proxy_pass   http://tnt_order_servers/tnt_order/;
        }

        location /passport/ {
            proxy_pass   http://ocs_servers/passport/;
        }
        location /ebk_push/ {
            proxy_pass   http://ocs_servers/ebk_push/;
        }
        location /channel_input/ {
     	   proxy_pass   http://channel_back_servers/channel_input/;
   	 }
        location /pet_back/ {
            proxy_pass   http://back_servers/pet_back/;
        }
   	location /ebooking/ {
            proxy_pass   http://ocs_servers/ebooking/;
        }
        location /clutter/ {
            proxy_pass   http://tnt_front_servers/clutter/;
        }
        location /security-web/ {
            proxy_pass   http://security_servers/security-web/;
        }
	location /seo/single/ { 
		proxy_pass http://10.200.1.203:8091/pet_back/; 
	}
        location /super_back/ {
            proxy_pass   http://back_servers/super_back/;
        }
        location /cmt_back/ { 
	    proxy_pass http://cmt_back_servers/cmt_back/; 
        } 

        location /cmt_dist/ { 
	    proxy_pass http://cmt_service_servers/cmt_dist/; 
        }

        location /cmtBusiness/ { 
  	    proxy_pass http://cmt_back_servers/cmtBusiness/; 
         }

        location /comment/ { 
            proxy_pass http://cmt_front_servers/cmt_front/comment/;
         }

        location /task-back/ {
            proxy_pass   http://task_back_servers/task-back/;
          #  proxy_pass   http://10.200.3.138:8080/task-back/;
         }

        location /backend/ {
            proxy_pass   http://back_servers/pet_back/;
        }
        location /sync-web/ {
           proxy_pass http://sync_web_servers/sync-web/;
        }

        location /sync-service/ {
           proxy_pass http://sync_service_servers/sync-service/;
        }

        location /cms_content/ {
            proxy_pass  http://cms_content_servers/cms_content/;
        } 

        location /finance/ {
            proxy_pass   http://10.200.1.203:8091/finance/;
        }

        location /abroadhotel/ {
            proxy_pass   http://hotel_servers/abroadhotel/;
        }
        location /finance/reconpay/ {
            proxy_pass  http://back_servers/finance/reconpay/;  
        }


        location /operate/ {
            proxy_pass   http://other_servers/operate/;
        }

        location /report/ {
            proxy_pass   http://report_servers/report/;
        }

        location /order/ {
            proxy_pass  http://super_service_servers/order/;
        }
        location  /alipayApp/toPay.do {
            proxy_pass  http://front_servers/;
        }
        location  /alipayWap/toPay.do {
            proxy_pass  http://front_servers/;
        }

        location /vst_back/{
	    proxy_pass  http://vst_back_servers/vst_back/;
	}
	location /vst_order/ {
            proxy_pass  http://vst_order_servers/vst_order/;
        }

        location /vst_workflow/ {
            proxy_pass  http://vst_workflow_servers/vst_workflow/;
        }

	location /vst_ebooking/ {
            proxy_pass  http://vst_ebk_servers/vst_ebooking/;
        }

        location /vst_ebkService/ {
            proxy_pass  http://vst_ebkService_servers/vst_ebkService/;
        }

	location /vst_pet/ {
	    proxy_pass  http://vst_pet_servers/vst_pet/;
	}
	location /vst_supp/{
	    proxy_pass  http://vst_supp_servers/vst_supp/;
	}

        location /vst_allocation/ {
            proxy_pass   http://vst_allocation_servers/vst_allocation/;
        }
        
        location /vst_rest/ {
            proxy_pass   http://rest_servers/vst_rest/;
        }        

        location /pet_public2/ {
            proxy_pass  http://pet_service2_servers/pet_public2/;
        }
 	location /vst_insurant/ {
    	     proxy_pass http://vst_supp_servers/vst_insurant/;
 	}
	location /vst_prodcal/ {
    	proxy_pass  http://vst_prodcal_servers/vst_prodcal/;
	}
	location /vst_prom/ {
    	proxy_pass  http://vst_prom_servers/vst_prom/;
	}
        location /vst_suppTicket/ {
            proxy_pass http://vst_suppTicket_servers/vst_suppTicket/;
        }
	location /interfacePlatform/ {
    	proxy_pass  http://interfacePlatform_servers/interfacePlatform/;
	}
	location /vst_passport/ {
    	proxy_pass   http://vst_passport_servers/vst_passport/;
	}

	location /search/{
	    proxy_pass  http://vst_search_servers/search/;
	}

        location /cash/ {
            proxy_pass  http://super_service_servers/cash/;
        }
         location /prodcal_cruise/ {
           proxy_pass http://prodcal_cruise_servers/prodcal_cruise/;
	}
	location /prodcal_hotel/ {
           proxy_pass http://prodcal_hotel_servers/prodcal_hotel/;
	}
	location /prodcal_local/ {
           proxy_pass http://prodcal_local_servers/prodcal_local/;
	}
	location /prodcal_routePackage/ {
           proxy_pass http://prodcal_routePackage_servers/prodcal_routePackage/;
	}
	location /prodcal_routeSupplier/ {
           proxy_pass http://prodcal_routeSupplier_servers/prodcal_routeSupplier/;
	}
	location /prodcal_ticket/ {
           proxy_pass http://prodcal_ticket_servers/prodcal_ticket/;
	}
	location /prodcal_traffic/ {
           proxy_pass http://prodcal_traffic_servers/prodcal_traffic/;
	}
	location /prodcal_visa/ {
           proxy_pass http://prodcal_visa_servers/prodcal_visa/;
	}
	location /prodcal_wifi/ {
           proxy_pass http://prodcal_wifi_servers/prodcal_wifi/;
	}


        location /pic/ {
            proxy_pass   http://pic_lib_servers/pic/;
        }

        location /pet_public/ {
            proxy_pass  http://pet_service_servers/pet_public/;
        }
        location /pet_job/ {
            proxy_pass  http://pet_service_servers/pet_job/;
        }

	  location /tnt_back/ {
            proxy_pass   http://tnt_back_servers/tnt_back/;
         }
         location /tnt_dist/ {
             proxy_pass  http://tnt_servers/tnt_dist/;
         }

         location /crm-server/ {
            proxy_pass  http://crm_server_servers/crm-server/;
        }
        location /vst_ticket/ {
            proxy_pass http://vst_ticket_servers/vst_ticket/;
         }
       location /tnt_sback/ {
             proxy_pass   http://tnt_sback_servers/tnt_sback/;
         }

         location /tnt_sorder/ {
             proxy_pass   http://tnt_sback_servers/tnt_sback/;
         }


	location /channel_back/ {
           proxy_pass http://channel_back_servers/channel_back/;
        }

        location /channel_service/ {
           proxy_pass http://channel_service_servers/channel_service/;
        }
         location /dest-service/ {
                proxy_pass http://dest_service_servers/dest-service/;
        }

        location /dest-bridge-schedule/ {
                proxy_pass http://dest_bridge_schedule_servers/dest-bridge-schedule/;
        }

        location /dest-hotel-dock/ {
                proxy_pass http://dest_hotel_dock_servers/dest-hotel-dock/;
        }
        location /dest-hotel-back/ {
                proxy_pass http://dest_hotel_back_servers/dest-hotel-back/;
        }
	location /dest-front {
                proxy_pass http://dest_front_servers/dest-front/;

        }
	location /tnt_taobao/ {
             proxy_pass   http://tnt_taobao_servers/tnt_taobao/;
        }

        location /tnt_price/ {
             proxy_pass   http://tnt_price_servers/tnt_price/;
        }

	location /lvmm_log/ {
                proxy_pass   http://lvmm_log_servers/lvmm_log/;
        }

	location /ship_front/ {
                proxy_pass   http://ship_front_servers/ship_front/;
        }

        location /ship_back/ {
                proxy_pass http://ship_back_servers/ship_back/;
	}

	location /visa_prod/ {
                proxy_pass   http://visa_prod_servers/visa_prod/;
        }	

	location /visa_order/ {
                proxy_pass   http://visa_order_servers/visa_order/;
        }

	location /lvmm_cms_back/ {
                proxy_pass   http://lvmm_cms_back_servers/lvmm_cms_back/;
        }
	location /hhs/v1/ {
             proxy_pass http://vst_hhs_service_servers/hhs/v1/;
        }

        location /hhs-admin/ {
             proxy_pass http://vst_hhs_admin_servers/hhs-admin/;
        }

        location /pp-admin/ {
            proxy_pass http://vst_prom_channel_bank_admin_servers/;
        }
        location /pp/v1/ {
            proxy_pass http://vst_prom_channel_bank_service_servers/pp/v1/;
        }
        location /lvsm/ {
            proxy_pass http://lvsm_server_services/lvsm/;  
	}
	location /user-server/ {
             proxy_pass   http://user_server_services/user-server/;
        }
        location /seo_back/ {
            proxy_pass http://seo_back_servers/seo_back/;
        }

        location /seo_dist/ {
            proxy_pass http://seo_dist_servers/seo_dist/;
        }

        location /vst_es_log/ {
            proxy_pass http://vst_es_log_servers/vst_es_log/;
        }


 	location /captcha-back/ {
            proxy_pass http://captcha_back_servers/captcha-back/;
        }
	location /dynamic-report/ {
            proxy_pass http://dynamic_report_servers/;
        }
        location /report-ui/ {
            proxy_pass http://report_ui_servers/;
        }
	location /kettle-service/ {
            proxy_pass http://kettle_service_servers/kettle-service/;
        }
        location /finance_back/ {                                                                                     
            proxy_pass   http://finance_back_servers/finance_back/;                                                           
        }                                                                                                         

	 location /prod/router {
                default_type text/plain;
                content_by_lua_file /usr/local/nginx/conf/lua_script/lvmama_ngx_lua/front-nginx/script/systemrouter/router.lua;
        }
	location /prod/getCacheValue {
                default_type text/plain;
                content_by_lua_file /usr/local/nginx/conf/lua_script/lvmama_ngx_lua/front-nginx/script/systemrouter/getCacheValue.lua;
        }


        error_page  404         /403.html;
        location = /403.html {
            root   /usr/share/nginx/html;
        }

        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   /usr/share/nginx/html;

        }
    }

 	server {
         listen       10.200.1.203:80;
          server_name lvyue.lvmama.com;
         server_name_in_redirect off;
        proxy_set_header Host $http_host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header remote-port $remote_port;

        location / {
                proxy_pass http://dest_front_servers/dest-front/cmsnew/index/lvyue-index/;

        }

        }

	
	server {
         listen     10.200.1.203:80;
         send_timeout 10;
         server_name  dujia.lvmama.com;
        server_name_in_redirect off;
                proxy_set_header Host $http_host;
                proxy_set_header X-Real-IP  $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header remote-port $remote_port;
                userid on;
                userid_name uid;
                userid_domain lvmama.com;
                userid_path /;
                userid_expires 365d;
        rewrite ^/robots.txt$ /pet_dest/robots.txt break;
        rewrite ^/newsitemap.xml$ /newsite/sitemap.xml last;
       
        proxy_set_header X-Real-URI $request_uri; 
	 
	if ($request_uri ~* (/)$) {
	    rewrite ^/(.*)(/)$ http://dujia.lvmama.com/$1 permanent;
            break;
	}
        location / {
                 proxy_pass   http://front_servers/;

         }
	location /img/{

            proxy_pass   http://vst_front_servers/vst_front/img/;
	}
	location /vst_front/{

            proxy_pass   http://vst_front_servers/vst_front/;
        }
	
        location /tour/{
         if ( $request_uri ~* '^/tour/([a-z]*)([0-9]*)/(wifi|phcard)$' ){
            proxy_pass   http://vst_front_servers/vst_front$request_uri;
              break;
            }
                proxy_pass   http://vst_search_servers/search/tour/;
         }
	 location /trip/{
            proxy_pass http://vst_front_servers/vst_front/trip/;
   	 }    

	location /youlun/ajax/line{
        proxy_pass   http://vst_search_servers/search/youlun/ajax/line;
        }


        location /search{
        proxy_pass   http://vst_search_servers/search;
        }
       
        location /group/{
                proxy_pass   http://vst_front_servers/vst_front/route/;
        }
        location /freetour/{
                proxy_pass   http://vst_front_servers/vst_front/route/;
        }
        location /local/{
                proxy_pass   http://vst_front_servers/vst_front/route/;
        }
        location /package/{
                proxy_pass   http://vst_front_servers/vst_front/route/;
        }
        location /visa/{
                proxy_pass   http://visa_front_servers/visa_front/visa/;
        }
	location /localfun/{
            	proxy_pass   http://vst_front_servers/vst_front/localfun/;
        }
	 location ~* /visa/visa-([0-9]+).html {
                proxy_pass http://visa_front_servers/visa_front/visa/showVisaBranchDetail.do?productBranchId=$1;
       	}

        location /visa_front/{
         proxy_pass http://visa_front_servers/visa_front/;
        }

        location /comment/ {
             proxy_pass http://vst_front_servers/vst_front/comment/;
         }
         #  location /sitemap.xml/ {
         #    proxy_pass http://tnt_front_servers/tnt_api/pet_dest/sitemap.xml;
         #}
         #location /sitemap/ {
         #    proxy_pass http://tnt_front_servers/tnt_api/pet_dest/sitemap/;
         #}
         location /newsitemap/ {
            proxy_pass   http://tnt_front_servers/tnt_api/sitemap/pet_dest/sitemap/;
         }
         location /newsite/ {
            proxy_pass   http://tnt_front_servers/tnt_api/sitemap/pet_dest/;
         }  
         location /wifi/{
 		 proxy_pass http://vst_front_servers/vst_front/wifi/;
	}

	location /phcard/{
	  proxy_pass http://vst_front_servers/vst_front/phcard/;
	}
	location /fit/{
          proxy_pass http://fit_servers/fit/;
        }
        location /customized/{
	proxy_pass http://vst_front_servers/vst_front/route/;
        }

    }

	server{
        listen 10.200.1.203:80;
        server_name s.lvmama.com;
        server_name_in_redirect off;
        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP  $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header remote-port $remote_port;
        userid on;
        userid_name uid;
        userid_domain lvmama.com;
        userid_path /;
        userid_expires 365d;
	
	                location /youlun/ajax/line-{
                        proxy_pass   http://vst_search_servers/search/youlun/ajax/line-;
                }
                location /ticket/{
                        proxy_pass http://vst_search_servers/search/v_ticket/;
                }
                location /route/{
                        proxy_pass http://vst_search_servers/search/v_route/;
                }
                location /freetour/{
                        proxy_pass http://vst_search_servers/search/v_freetour/;
                }
                location /around/{
                        proxy_pass http://vst_search_servers/search/v_around/;
                }
                location /local/{
                        proxy_pass http://vst_search_servers/search/v_local/;
                }
                location /localplay/{
                        proxy_pass http://vst_search_servers/search/v_localplay/;
                }
                location /group/{
                        proxy_pass http://vst_search_servers/search/v_group/;
                }
                location /hotel/{
                	#proxy_pass http://vst_search_servers/search/resort_hotel/;
                	proxy_pass http://vst_search_servers/search/new_resort_hotel/;
                }
		location /hotel/search {
                        proxy_pass http://vst_search_servers/search/new_resort_hotel_search;
                }
                location /hotsell {
                        proxy_pass    http://vst_search_servers/search/hotsell;
                }
                location /{
                        proxy_pass   http://vst_search_servers/search/;
                }
                location /visa/{
                        proxy_pass http://vst_search_servers/search/v_visa/;
                }
                location /scenictour/{

                        proxy_pass   http://vst_search_servers/search/v_scenictour/;

                }
                location /play/{

                        proxy_pass   http://vst_search_servers/search/v_play/;
                     }

        location /remoting/allSearchService {
                 proxy_pass http://vst_search_servers_sol/search/remoting/allSearchService;
        }
        location /remoting/tuangouSearchService {
                proxy_pass http://vst_search_servers_sol/search/remoting/tuangouSearchService;
        }
        location /remoting/vstSearchServiceRemote {
                proxy_pass http://vst_search_servers_sol/search/remoting/vstSearchServiceRemote;
        }
        location /remoting/clientPlaceService {
                 proxy_pass http://vst_search_servers_sol/search/remoting/clientPlaceService;
        }
        location /remoting/clientProductService {
                 proxy_pass http://vst_search_servers_sol/search/remoting/clientProductService;
        }
        location /remoting/clientHotelSearchService {
                 proxy_pass http://vst_search_servers_sol/search/remoting/clientHotelSearchService;
        }

        location /remoting/searchApiServiceRemote {
                proxy_pass http://vst_search_servers_sol/search/remoting/searchApiServiceRemote;
        }
        location /remoting/autoCompleteOneService {
                proxy_pass http://vst_search_servers_sol/search/remoting/autoCompleteOneService;
        }
   }

    server {
        listen       10.200.1.203:80;
        server_name  e.lvmama.com;
        server_name_in_redirect off;
        proxy_set_header Host $http_host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header remote-port $remote_port;
        location / {
            proxy_pass   http://ocs_servers/ebooking/;
        }

	location /ebooking/ {
            proxy_pass   http://ocs_servers/ebooking/;
        }
	location /vst_ebooking/ {
            proxy_pass http://vst_ebk_servers/vst_ebooking/;
        }
    }

    server {
        listen       10.200.1.203:80;
        server_name  cl.lvmama.com;
        proxy_set_header remote-port $remote_port;
	rewrite ^/(.*)$ http://www.lvmama.com/404.jsp;
    }


 server {
         listen       10.200.1.203:80;
         server_name  f.lvmama.com;
         charset koi8-r;
         access_log  /var/log/nginx/f.access.log  main;
         proxy_set_header Host $http_host;
         location / {
             proxy_pass   http://tnt_front_servers/;
         }
 
 }


    server {
        listen       10.200.1.203:443;
        ssl                  on;
        ssl_certificate      server.crt;
        ssl_certificate_key  server.key;
        ssl_session_timeout  5m;
        ssl_protocols  SSLv2 SSLv3 TLSv1;
        ssl_ciphers  ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;
        ssl_prefer_server_ciphers   on;
        listen       10.200.1.203:80;
        server_name  api3g.lvmama.com;
        proxy_set_header remote-port $remote_port;
        #log_format   '$remote_addr - $remote_user [$time_local] "$http_host" "$request" "$request_body"'
        #                  '$status $body_bytes_sent "$http_referer" '
        #                  '"$http_user_agent" "$http_x_forwarded_for" "$upstream_addr" "$uid_got" "$uid_set" "$cookie_lvsessionid"';
        #charset koi8-r;

        access_log  /var/log/nginx/api3g.access.log  main;
        proxy_set_header Host $http_host;



        location /clutter/ {
            proxy_pass   http://tnt_front_servers/clutter/;
        }
        location /ebk_push/ {
            proxy_pass   http://ocs_servers/ebk_push/;
        }

        location /api/ { 
		proxy_pass http://3g_servers/client-service/; 
	}


}
    server {
        listen    10.200.1.203:80;
        server_name  t.lvmama.com;
        access_log  /var/log/nginx/t.lvmama.com.access.log  main;

        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header remote-port $remote_port;
        rewrite ^/tc/(.*) /passport/tcode/lt.do?code=$1 last;
        location /passport/tcode/lt.do {
                proxy_pass http://ocs_servers/passport/tcode/lt.do;
        }

        location / {
               rewrite /(.*) http://m.lvmama.com/ permanent;
        }
 
   }

server {
        listen       10.200.1.203:80;
        server_name  api.lvmama.com;
        charset koi8-r;

        access_log  /var/log/nginx/api.access.log  main;
        proxy_set_header Host $http_host;



        location / {
            proxy_pass   http://tnt_front_servers/tnt_api/;
        }    

}

    server {
        listen 10.200.1.203:80;
        server_name ebooking.lvmama.com;
        server_name_in_redirect off;
        proxy_set_header Host $http_host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header remote-port $remote_port;

        location /vst_ebooking/ {
            proxy_pass http://vst_ebk_servers/vst_ebooking/;
        }
        location /pic/ {
            proxy_pass   http://pic_lib_servers/pic/;
        }

	location /dest-ebooking/ {
            proxy_pass   http://dest_ebooking_servers/dest-ebooking/;
        }
    }

     server {
        listen       10.200.1.203:443;
        server_name  ebooking.lvmama.com;
        server_name_in_redirect off;
        proxy_set_header Host $http_host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header remote-port $remote_port;
        proxy_set_header X-Forwarded-Proto  $scheme;

        ssl                  on;
        ssl_certificate     /usr/local/ssl/cacert.pem;
        ssl_certificate_key /usr/local/ssl/privkey.pem;
        ssl_session_timeout  5m;

        location /vst_ebooking/ {
            proxy_set_header Host s.ebooking.lvmama.com;
            proxy_pass http://vst_ebk_servers/vst_ebooking/;
        }

        location /pic/ {
            proxy_pass   https://https_pic_lib_servers/pic/;
        }

        location /pic_static/ {
            proxy_set_header Host pic.lvmama.com;
            proxy_pass   http://pic.lvmama.com/;
        }

    }
       
     server {
        listen       10.200.1.203:443;
        server_name  lvs.lvmama.com;
        server_name_in_redirect off;
        proxy_set_header Host $http_host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header remote-port $remote_port;
        proxy_set_header X-Forwarded-Proto  $scheme;

        ssl                  on;
        ssl_certificate     /usr/local/ssl/cacert.pem;
        ssl_certificate_key /usr/local/ssl/privkey.pem;
        ssl_session_timeout  5m;

        location /lvsc/ {
            proxy_pass https://https_lvsm_server_services/lvsc/;
        }

    }
     server {
        listen     10.200.1.203:443;
        server_name login.lvmama.com;
	server_name www.lvmama.com;
        server_name_in_redirect off;
        proxy_set_header Host $http_host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header remote-port $remote_port;
        proxy_set_header X-Forwarded-Proto  $scheme;

        ssl                  on;
        ssl_certificate     /usr/local/ssl/cacert.pem;
        ssl_certificate_key /usr/local/ssl/privkey.pem;
        ssl_session_timeout  5m;

    
        location /nsso/ {
            proxy_pass   https://https_front_servers/nsso/;
        }
       	location /pet_topic/ {
            proxy_pass   https://https_pc_servers/pet_topic/;
        }
        location /lvsc/ {
            proxy_pass https://https_lvsm_server_services/lvsc/;
        }

	location /captcha/ {
            proxy_pass http://captcha_front_servers/captcha-front/;
        }
        
        location  /vst_front/order/route/create.do {
            proxy_pass  https://https_vst_front_servers/vst_front/order/route/create.do;
        }

        location /vst_front/{
           proxy_pass http://vst_front_servers/vst_front/;
        }

	location  /visa_front/order/visa/create.do {
            proxy_pass  https://https_visa_front_servers/visa_front/order/visa/create.do;
        }

        location /visa_front/{
         proxy_pass http://visa_front_servers/visa_front/;
        }
    }

server {
         listen     10.200.1.203:80;
         send_timeout 10;
         server_name  jr.lvmama.com;
        server_name_in_redirect off;
                proxy_set_header Host $http_host;
                proxy_set_header X-Real-IP  $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header remote-port $remote_port;
#                userid on;
#                userid_name uid;
#                userid_domain lvmama.com;
#                userid_path /;
#                userid_expires 365d;

#        if ($request_uri ~* (/)$) {
#           rewrite ^/(.*)(/)$ http://jr.lvmama.com/$1 permanent;
#            break;
#        }
        location /img/{

            proxy_pass   http://pet_finfront_servers/img/;
        }
        location / {

            proxy_pass   http://pet_finfront_servers/;
     
    }
}
      server {
        listen    10.200.1.203:443;
        server_name  jr.lvmama.com;

	server_name_in_redirect off;
        proxy_set_header Host $http_host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    	proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header remote-port $remote_port;
	error_log  /var/log/nginx/super_error.log notice;
			
		
        ssl                  on;
        ssl_certificate     /usr/local/ssl/ca-cert.pem;
        ssl_certificate_key /usr/local/ssl/ca-key.pem;
        ssl_session_timeout  5m;
		
        location /img/{
            proxy_pass   https://https_pet_finfront_servers/img/;
        }
        location / {
            proxy_pass   https://https_pet_finfront_servers/;
    	}
   }

        server {
        listen      10.200.1.203:443;
        server_name  md.lvmama.com;
        server_name_in_redirect off;
        proxy_set_header Host $http_host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header remote-port $remote_port;
        proxy_set_header X-Forwarded-Proto  $scheme;
        error_log  /var/log/nginx/o2o.log;
        access_log  /var/log/nginx/o2o.log;
        ssl                  on;
        ssl_certificate     /usr/local/ssl/cacert.pem;
        ssl_certificate_key /usr/local/ssl/privkey.pem;
        ssl_session_timeout  5m;
        location / {
            proxy_pass  https://https_o2o_front_servers/o2o_front/userLogin.do;
        }
        location /o2o_front/ {       
            proxy_pass   https://https_o2o_front_servers/o2o_front/;
        }
        location /o2o_ms/ {
            proxy_pass   https://https_o2o_ms_servers/o2o_ms/;
        }
    }
    server { 
	listen 80; 
	server_name appf.lvmama.com; 
	server_name_in_redirect off; 
	proxy_set_header Host $http_host; 
	proxy_set_header X-Real-IP $remote_addr; 
	proxy_set_header X-Forwarded-For $remote_addr; 
	proxy_set_header remote-port $remote_port; 
	proxy_intercept_errors on; 
	error_page 404 http://www.lvmama.com/404.jsp; 
	charset utf-8; 
	sendfile on; 
	send_timeout 300; 

	location / { 
                proxy_pass http://tnt_client_servers/tnt_client/; 
		} 
	}	
    server {
                listen      10.200.1.203:80;
                server_name  md.lvmama.com;
                server_name_in_redirect off;
                client_max_body_size 50m;
                proxy_set_header Host $http_host;
                proxy_set_header X-Real-IP  $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header remote-port $remote_port;
                userid on;
                error_log  /var/log/nginx/o2o.log;
            location /o2o_front/ {
                #proxy_pass   http://o2o_front_servers/o2o_front/;
                rewrite ^(.*)$  https://$host$1 permanent;  
                    }
            location / {
                #proxy_pass  http://o2o_front_servers/o2o_front/userLogin.do;
                rewrite ^(.*)$  https://$host$1 permanent;  
                   }

            location /o2o_back/ {
                proxy_pass   http://o2o_back_servers/o2o_back/;
         }
            location /o2o_report/ {
                proxy_pass   http://o2o_report_servers/o2o_report/;
         }
            location /o2o_cal {
            proxy_pass http://o2o_cal_servers/o2o_cal;
         }
            location /o2o_ms {
            proxy_pass http://o2o_ms_servers/o2o_ms;
         }
            location /pic/ {
                proxy_pass   http://pic_lib_servers/pic/;
        }
         location  = /o2o_front/store/getValidStoreList.do {
            proxy_pass   http://o2o_front_servers/o2o_front/store/getValidStoreList.do;
        }
        location  = /o2o_front/checkversion.jsp {
            proxy_pass   http://o2o_front_servers/o2o_front/checkversion.jsp;
        }
        location /o2o/api/ {       
           proxy_pass   http://o2o_front_servers/o2o_front/;
        }

    }



    server {

         listen       10.200.1.203:80;
         server_name  union.lvmama.com;
         charset koi8-r;
         access_log  /var/log/nginx/union.access.log  main;
         proxy_set_header Host $http_host;

        location /tnt_cps {
             proxy_pass   http://tnt_cps_servers/tnt_cps/;
        }

        location / {
             proxy_pass   http://tnt_cps_servers/tnt_cps/;
        }

    }
}

